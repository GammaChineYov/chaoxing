# Flask Redis App

这是一个使用Flask和Redis构建的简单Web应用程序，提供用户身份验证和Redis操作的功能。

## 项目结构

```
flask-redis-app
├── src
│   ├── app.py          # 应用程序入口点
│   ├── auth.py         # 身份验证相关功能
│   ├── redis_client.py  # Redis数据库操作
│   ├── views
│   │   ├── token.py    # Token相关视图
│   │   ├── redis.py    # Redis相关视图
│   │   ├── user.py     # 用户相关视图
│   │   ├── admin.py    # 管理员相关视图
│   │   └── study.py    # 学习相关视图
│   ├── models
│   │   ├── user.py     # 用户模型
│   │   └── study.py # 学习相关模型
│   ├── templates
│   │   ├── base.html   # 基础模板
│   │   ├── index.html  # 首页模板
│   │   ├── token.html  # Token管理模板
│   │   ├── admin.html  # 管理员面板模板
│   │   ├── study.html  # 学习页面模板
│   │   └── user
│   │       ├── login.html # 用户登录模板
│   │       └── change_password.html # 修改密码模板
├── requirements.txt     # 项目依赖
└── README.md            # 项目文档
```

## 安装

1. 克隆该项目：

   ```
   git clone <repository-url>
   cd flask-redis-app
   ```

2. 创建并激活虚拟环境（可选）：

   ```
   python -m venv venv
   source venv/bin/activate  # 在Linux或MacOS上
   venv\Scripts\activate     # 在Windows上
   ```

3. 安装依赖：

   ```
   pip install -r requirements.txt
   ```

## 配置

在运行应用程序之前，请确保您已安装并运行Redis服务器。您可以使用默认配置，或根据需要修改`src/redis_client.py`中的连接设置。

## 运行应用程序

在终端中运行以下命令启动Flask应用：

```
python src/app.py
```

应用程序将默认在`http://127.0.0.1:5000`上运行。

## 使用

访问`http://127.0.0.1:5000`以查看应用程序界面。您可以注册新用户并进行登录，以体验身份验证功能。

## 贡献

欢迎任何形式的贡献！请提交问题或拉取请求。

## 许可证

此项目采用MIT许可证。有关详细信息，请参阅LICENSE文件。

## 计划

### 更新base.html侧边栏中的“学习”选项对应到study.html，并在“学习”选项下面添加“设置”、“学习进度”、“学习日志”子选项,在侧边栏左上角增加三条杠的图标,点击后可展开、隐藏侧边栏

- [x] 更新base.html侧边栏中的“学习”选项对应到study.html
- [x] 在“学习”选项下面添加“设置”、“学习进度”、“学习日志”子选项
- [x] 在侧边栏左上角增加三条杠的图标,点击后可展开、隐藏侧边栏

### 使用socketio和jwt实现study.html和study.py对应的学习页面

#### 包含“设置”和“学习进度”两个标签页面板

- [x] 创建study.html，包含“设置”和“学习进度”两个标签页面板
- [x] 创建study.py，实现学习页面的功能

#### 手机端可左右滑动切换面板或者点击侧边栏对应按钮切换或者点击对应标签页按钮切换

- [ ] 实现手机端左右滑动切换面板
- [x] 实现点击侧边栏对应按钮切换
- [x] 实现点击对应标签页按钮切换

#### “设置”标签面板有多个子面板

- [x] 创建账号密码设置子面板
- [x] 创建课程设置子面板

#### 账号密码设置子面板

- [x] 设置账号密码
- [x] 点击“登陆”，参考main.py中的方法登陆超星chaoxing
- [x] 登陆超星成功后有个绿色图标并提示登陆成功，设置对应实例到用户session
- [x] 使用jwt设置超星账号密码到用户cookies下次读取
- [x] 如果失败有个红色图标并提示登陆失败及其原因

#### 课程设置子面板

- [x] 登陆完成后自动更新并下滑到该面板
- [x] 用复选框列表列出用户的所有课程名称及其历史完成状态
- [x] 用户可以选择需要学习的课程
- [x] 点击“开始学习”（已经开始则显示“重新开始”）

#### 学习进度标签面板

- [x] 跳转到“学习进度”标签面板
- [x] 使用动态树状图显示当前学习的课程、章节、任务点，包括名称，当前用时，课程的章节进度（章节的任务点进度）xx/xx
- [x] 使用socketio实时更新进度
- [x] 底部有总进度子面板，显示本次学习的总学习时间，单任务点平均完成时间，单章节平均完成时间，并包含一个“停止”按钮

#### 学习日志标签面板

- [x] 实时增量推送学习线程的日志到该面板（首次进入面板时先推送历史日志）
- [x] 包含“暂停/继续”、“停止”按钮

### 学习相关的对象实体、用户进度实体模型在study_models.py中定义

- [x] 定义学习相关的对象实体
- [x] 定义用户进度实体模型

### 确保用户刷新页面或者重新登陆后可以得到最新的学习的状态，并且用户的刷新、退出、重新登陆不影响学习线程的执行

- [x] 确保用户刷新页面或者重新登陆后可以得到最新的学习的状态
- [x] 确保用户的刷新、退出、重新登陆不影响学习线程的执行