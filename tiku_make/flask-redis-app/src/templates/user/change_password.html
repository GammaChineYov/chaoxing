{% extends "base.html" %}

{% block title %}修改密码{% endblock %}

{% block content %}
<h1>修改密码</h1>
<form id="changePasswordForm">
    <label for="old_password">旧密码:</label>
    <input type="password" id="old_password" name="old_password"><br><br>
    <label for="new_password">新密码:</label>
    <input type="password" id="new_password" name="new_password"><br><br>
    <button type="button" onclick="changePassword()">修改密码</button>
</form>
<script>
    function changePassword() {
        const old_password = document.getElementById('old_password').value;
        const new_password = document.getElementById('new_password').value;
        fetch('/user/change_password', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ old_password, new_password })
        })
        .then(response => response.json())
        .then(data => alert(data.message))
        .catch(error => console.error('Error:', error));
    }
</script>
{% endblock %}
